console.log('area ajax response start');
var marker;
//全ユーザー分の情報に展開されてclientに送信される
<% @users.each do |user| %>

//1 userのareaをポリゴンで描画する
var area_<%= user.id %> = new google.maps.Polygon({
    strokeColor: '#220000',
    strokeOpacity: 1.0,
    strokeWeight: 3
});


// LonLatが/で連結されて保存されている前提で一地点ごとに分解する
//# TODO: coffee のロジックと同等なので要リファクタ
lonlatarray=[];
ars ="<%= user.address %>";
console.log(ars);
ar = ars.split('/');
var i;
for (i=0;i<ar.length;i++) {
    llstr=ar[i];
    llstr=llstr.slice(1,-1);
    ll=llstr.split(',');
    lonlatarray.push(new google.maps.LatLng(ll[0],ll[1])) 
}
console.log(lonlatarray);
area_<%= user.id %>.setPath(lonlatarray);
area_<%= user.id %>.setMap(window.mymap);

//1 userの代表緯度経度にmarker を表示して頭文字を表示
var pos = new google.maps.LatLng(<%= user.latitude %>, <%= user.longitude %>);
marker = new google.maps.Marker({
    position:pos,
    label:"<%= user.title %>",
    map: window.mymap
});



<% end %>
